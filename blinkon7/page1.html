<!DOCTYPE html>
<title>Demo 1</title>
<script src="streaming-element.js"></script>
<style>
  body {
    font-size: 36pt;
    font-family: sans-serif;
  }

  button {
    font-size: inherit;
  }

  #next {
    text-align: right;
    display: none;
    font-size: 24pt;
  }

  #next a {
    text-decoration-line: none;
  }
  
  .code {
    background-color: rgb(245, 242, 240);
    padding: 16px 16px 16px 16px;
  }

  .keyword {
    color: #7f007f;
  }

  .type {
    color: #228b22;
  }

  .variable-name {
    color: #a0522d;
  }

  .string {
    color: #8b2252;
  }
  
</style>

<div><button id="trigger">Trigger</button></div>
<div><streaming-element id="target"></streaming-element></div>
<div>&uparrow;&uparrow; <code>&lt;streaming-element&gt;</code> IS HERE &uparrow;&uparrow;</div>
<div id=next><a href=page2.html>Next >>></a></div>
<script>
let trigger = document.querySelector('#trigger');
trigger.onclick = async () => {
  trigger.disabled = true;
  trigger.onclick = undefined;
  document.querySelector('#next').style.display = 'block';
  const streamingElement =
    document.querySelector('#target');
  const response = await fetch('code.html',
                               {mode: 'no-cors'});

  response.body
    .pipeThrough(new TextDecoder())
    .pipeTo(streamingElement.writable);
};
</script>
